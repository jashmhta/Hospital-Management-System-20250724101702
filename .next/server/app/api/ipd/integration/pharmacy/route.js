(()=>{var e={};e.id=9036,e.ids=[9036],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33159:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73327:()=>{},74879:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>N,routeModule:()=>O,serverHooks:()=>f,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>l});var n={};t.r(n),t.d(n,{GET:()=>d,POST:()=>s,getMedicationHistory:()=>u});var o=t(2179),i=t(20540),a=t(57395),c=t(8306);async function s(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"ORDER_MEDICATIONS");if(r instanceof c.NextResponse)return r;try{let t=await e.json();if(Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"POST /api/ipd/integration/pharmacy",actionType:t.actionType},"Processing pharmacy request"),!t.actionType||!t.encounterId)return c.NextResponse.json({error:"Missing required fields: actionType, encounterId"},{status:400});let n=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}())();switch(t.actionType){case"ORDER":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),o=await n.createMedicationOrder(e,r.user.id);if(o.warning)return c.NextResponse.json(o,{status:409});return c.NextResponse.json(o,{status:201})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}case"RECONCILIATION":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),o=await n.performMedicationReconciliation(e,r.user.id);return c.NextResponse.json(o,{status:200})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}case"ADMINISTRATION":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),o=await n.recordMedicationAdministration(e,r.user.id);return c.NextResponse.json(o,{status:200})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}case"DISCONTINUE":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),o=await n.discontinueMedication(e,r.user.id);return c.NextResponse.json(o,{status:200})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}default:return c.NextResponse.json({error:`Unsupported action type: ${t.actionType}`},{status:400})}}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}async function d(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"VIEW");if(r instanceof c.NextResponse)return r;try{let{searchParams:r}=new URL(e.url),t=r.get("patientId");if(!t)return c.NextResponse.json({error:"Missing patientId parameter"},{status:400});Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"GET /api/ipd/integration/pharmacy",patientId:t},"Getting patient medications");let n=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}())(),o=await n.getActiveMedications(t);return c.NextResponse.json(o)}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}async function u(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"VIEW");if(r instanceof c.NextResponse)return r;try{let{searchParams:r}=new URL(e.url),t=r.get("patientId"),n=parseInt(r.get("limit")||"50");if(!t)return c.NextResponse.json({error:"Missing patientId parameter"},{status:400});Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"GET /api/ipd/integration/pharmacy/medication-history",patientId:t,limit:n},"Getting medication history");let o=Object(function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}())(),i=await o.getMedicationHistory(t,n);return c.NextResponse.json(i)}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}!function(){var e=Error("Cannot find module '@/services/integration/PharmacyService'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}();let O=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/ipd/integration/pharmacy/route",pathname:"/api/ipd/integration/pharmacy",filename:"route",bundlePath:"app/api/ipd/integration/pharmacy/route"},resolvedPagePath:"/workspace/Hospital-Management-System/src/app/api/ipd/integration/pharmacy/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:p,workUnitAsyncStorage:l,serverHooks:f}=O;function N(){return(0,a.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:l})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[7395,6088],()=>t(74879));module.exports=n})();