(()=>{var e={};e.id=7268,e.ids=[7268],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33159:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},54884:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>b,routeModule:()=>O,serverHooks:()=>N,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>f});var o={};t.r(o),t.d(o,{GET:()=>c,POST:()=>d,getLabResultDetails:()=>l,getLabResults:()=>u});var n=t(2179),a=t(20540),i=t(57395),s=t(8306);async function d(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"ORDER_LABS");if(r instanceof s.NextResponse)return r;try{let t=await e.json();if(Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"POST /api/ipd/integration/laboratory",actionType:t.actionType},"Processing laboratory request"),!t.actionType||!t.encounterId)return s.NextResponse.json({error:"Missing required fields: actionType, encounterId"},{status:400});let o=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}())();switch(t.actionType){case"ORDER":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),n=await o.createLabOrder(e,r.user.id);return s.NextResponse.json(n,{status:201})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}case"CANCEL":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),n=await o.cancelLabOrder(e,r.user.id);return s.NextResponse.json(n,{status:200})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}case"RESULT_NOTIFICATION":try{let e=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}()).parse(t),n=await o.sendLabResultNotification(e,r.user.id);return s.NextResponse.json(n,{status:200})}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}default:return s.NextResponse.json({error:`Unsupported action type: ${t.actionType}`},{status:400})}}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}async function c(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"VIEW");if(r instanceof s.NextResponse)return r;try{let{searchParams:r}=new URL(e.url),t=r.get("patientId");if(!t)return s.NextResponse.json({error:"Missing patientId parameter"},{status:400});Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"GET /api/ipd/integration/laboratory",patientId:t},"Getting pending laboratory orders");let o=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}())(),n=await o.getPendingLabOrders(t);return s.NextResponse.json(n)}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}async function u(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"VIEW");if(r instanceof s.NextResponse)return r;try{let{searchParams:r}=new URL(e.url),t=r.get("patientId"),o=r.get("encounterId")||void 0,n=parseInt(r.get("limit")||"50"),a="true"===r.get("includeDetails");if(!t)return s.NextResponse.json({error:"Missing patientId parameter"},{status:400});Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"GET /api/ipd/integration/laboratory/results",patientId:t,encounterId:o,limit:n,includeDetails:a},"Getting laboratory results");let i=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}())(),d=await i.getLabResults(t,o,n,a);return s.NextResponse.json(d)}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}async function l(e){let r=await Object(function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,"VIEW");if(r instanceof s.NextResponse)return r;try{let{searchParams:t}=new URL(e.url),o=t.get("orderId");if(!o)return s.NextResponse.json({error:"Missing orderId parameter"},{status:400});Object(function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}()).info({route:"GET /api/ipd/integration/laboratory/results/details",orderId:o},"Getting laboratory result details");let n=Object(function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}())(),a=await n.getLabResultDetails(o,r.user.id);return s.NextResponse.json(a)}catch(e){return Object(function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}())(e)}}!function(){var e=Error("Cannot find module '@/services/integration/LaboratoryService'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/api/errorHandler'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/logger'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '../../middleware/auth'");throw e.code="MODULE_NOT_FOUND",e}();let O=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/ipd/integration/laboratory/route",pathname:"/api/ipd/integration/laboratory",filename:"route",bundlePath:"app/api/ipd/integration/laboratory/route"},resolvedPagePath:"/workspace/Hospital-Management-System/src/app/api/ipd/integration/laboratory/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:p,workUnitAsyncStorage:f,serverHooks:N}=O;function b(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:f})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73327:()=>{}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[7395,6088],()=>t(54884));module.exports=o})();