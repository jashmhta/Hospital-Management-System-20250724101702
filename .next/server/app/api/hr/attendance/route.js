(()=>{var e={};e.id=5322,e.ids=[5322],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33159:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73327:()=>{},92139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>l,serverHooks:()=>f,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{GET:()=>p,POST:()=>u});var n=r(2179),s=r(20540),o=r(57395),i=r(8306),c=r(72482);!function(){var e=Error("Cannot find module '@/lib/hr/attendance-service'");throw e.code="MODULE_NOT_FOUND",e}();let d=c.z.object({employeeId:c.z.string().min(1,"Employee ID is required"),date:c.z.string().refine(e=>!isNaN(Date.parse(e)),{message:"Invalid date format"}),checkInTime:c.z.string().refine(e=>!isNaN(Date.parse(e)),{message:"Invalid time format"}),biometricData:c.z.string().optional(),notes:c.z.string().optional()});async function u(e){try{let t=await e.json(),r=d.safeParse(t);if(!r.success)return i.NextResponse.json({error:"Validation error",details:r.error.format()},{status:400});let{employeeId:a,date:n,checkInTime:s,biometricData:o,notes:c}=r.data,u=!1;if(o&&!(u=await Object(function(){var e=Error("Cannot find module '@/lib/hr/attendance-service'");throw e.code="MODULE_NOT_FOUND",e}()).verifyBiometric(a,o)))return i.NextResponse.json({error:"Biometric verification failed"},{status:401});let p=await Object(function(){var e=Error("Cannot find module '@/lib/hr/attendance-service'");throw e.code="MODULE_NOT_FOUND",e}()).recordCheckIn({employeeId:a,date:new Date(n),checkInTime:new Date(s),biometricVerified:u,notes:c});return i.NextResponse.json(p)}catch(e){return console.error("Error recording check-in:",e),i.NextResponse.json({error:"Failed to record check-in",details:e.message},{status:500})}}async function p(e){try{let t=e.nextUrl.searchParams,r=parseInt(t.get("skip")||"0"),a=parseInt(t.get("take")||"10"),n=t.get("date")?new Date(t.get("date")):void 0,s=t.get("startDate")?new Date(t.get("startDate")):void 0,o=t.get("endDate")?new Date(t.get("endDate")):void 0,c=t.get("departmentId")||void 0,d=t.get("status")||void 0,u=t.get("biometricVerified")?"true"===t.get("biometricVerified"):void 0,p=await Object(function(){var e=Error("Cannot find module '@/lib/hr/attendance-service'");throw e.code="MODULE_NOT_FOUND",e}()).listAttendance({skip:r,take:a,date:n,startDate:s,endDate:o,departmentId:c,status:d,biometricVerified:u});return i.NextResponse.json(p)}catch(e){return console.error("Error fetching attendance records:",e),i.NextResponse.json({error:"Failed to fetch attendance records",details:e.message},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/hr/attendance/route",pathname:"/api/hr/attendance",filename:"route",bundlePath:"app/api/hr/attendance/route"},resolvedPagePath:"/workspace/Hospital-Management-System/src/app/api/hr/attendance/route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:m,workUnitAsyncStorage:g,serverHooks:f}=l;function v(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7395,6088,2482],()=>r(92139));module.exports=a})();