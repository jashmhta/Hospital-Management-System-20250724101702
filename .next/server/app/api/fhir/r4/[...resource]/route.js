(()=>{var e={};e.id=4543,e.ids=[4543],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33159:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73327:()=>{},97315:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>j,routeModule:()=>h,serverHooks:()=>y,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>O});var o={};t.r(o),t.d(o,{DELETE:()=>d,GET:()=>c,PATCH:()=>f,POST:()=>u,PUT:()=>p});var s=t(2179),n=t(20540),i=t(57395),a=t(8306);async function c(e,{params:r}){try{let t,{resource:o}=r,s=o[0],n=o[1],i=new URL(e.url),c=Object.fromEntries(i.searchParams),u={"Content-Type":"application/fhir+json","Cache-Control":"no-cache"};if(n){let e=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).readResource(s,n);if(!e.success)return a.NextResponse.json(e.issues||{error:e.error},{status:"Resource not found"===e.error?404:400,headers:u});return a.NextResponse.json(e.data,{headers:u})}switch(s){case"Patient":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).searchPatients(c);break;case"Appointment":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).searchAppointments(c);break;case"Encounter":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).searchEncounters(c);break;default:t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).searchResources(s,c)}if(!t.success)return a.NextResponse.json(t.issues||{error:t.error},{status:400,headers:u});return a.NextResponse.json(t.data,{headers:u})}catch(e){return console.error("FHIR GET error:",e),a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"exception",diagnostics:e instanceof Error?e.message:"Internal server error"}]},{status:500,headers:{"Content-Type":"application/fhir+json"}})}}async function u(e,{params:r}){try{let t,{resource:o}=r,s=o[0],n=await e.json();if(n.resourceType!==s)return a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"invalid",diagnostics:`Resource type in body (${n.resourceType}) does not match URL (${s})`}]},{status:400,headers:{"Content-Type":"application/fhir+json"}});switch(s){case"Patient":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).createPatient(n);break;case"Appointment":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).createAppointment(n);break;case"Encounter":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).createEncounter(n);break;case"MedicationRequest":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).createMedicationRequest(n);break;default:t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).createResource(n)}if(!t.success)return a.NextResponse.json(t.issues||{error:t.error},{status:400,headers:{"Content-Type":"application/fhir+json"}});let i={"Content-Type":"application/fhir+json",Location:`/fhir/r4/${s}/${t.data.id}`,ETag:`W/"${t.data.meta?.versionId||"1"}"`};return a.NextResponse.json(t.data,{status:201,headers:i})}catch(e){return console.error("FHIR POST error:",e),a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"exception",diagnostics:e instanceof Error?e.message:"Internal server error"}]},{status:500,headers:{"Content-Type":"application/fhir+json"}})}}async function p(e,{params:r}){try{let t,{resource:o}=r,s=o[0],n=o[1];if(!n)return a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"required",diagnostics:"Resource ID is required for PUT operation"}]},{status:400,headers:{"Content-Type":"application/fhir+json"}});let i=await e.json();if(i.resourceType!==s)return a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"invalid",diagnostics:`Resource type in body (${i.resourceType}) does not match URL (${s})`}]},{status:400,headers:{"Content-Type":"application/fhir+json"}});switch(s){case"Patient":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).updatePatient(n,i);break;case"Appointment":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).updateAppointment(n,i);break;case"Encounter":t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).updateEncounter(n,i);break;default:t=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).updateResource(s,n,i)}if(!t.success){let e="Resource not found"===t.error?404:400;return a.NextResponse.json(t.issues||{error:t.error},{status:e,headers:{"Content-Type":"application/fhir+json"}})}let c={"Content-Type":"application/fhir+json",ETag:`W/"${t.data.meta?.versionId||"1"}"`};return a.NextResponse.json(t.data,{headers:c})}catch(e){return console.error("FHIR PUT error:",e),a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"exception",diagnostics:e instanceof Error?e.message:"Internal server error"}]},{status:500,headers:{"Content-Type":"application/fhir+json"}})}}async function d(e,{params:r}){try{let{resource:e}=r,t=e[0],o=e[1];if(!o)return a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"required",diagnostics:"Resource ID is required for DELETE operation"}]},{status:400,headers:{"Content-Type":"application/fhir+json"}});let s=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).deleteResource(t,o);if(!s.success){let e="Resource not found"===s.error?404:400;return a.NextResponse.json(s.issues||{error:s.error},{status:e,headers:{"Content-Type":"application/fhir+json"}})}return new a.NextResponse(null,{status:204})}catch(e){return console.error("FHIR DELETE error:",e),a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"exception",diagnostics:e instanceof Error?e.message:"Internal server error"}]},{status:500,headers:{"Content-Type":"application/fhir+json"}})}}async function f(e,{params:r}){try{let{resource:t}=r,o=t[0],s=t[1];if(!s)return a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"required",diagnostics:"Resource ID is required for PATCH operation"}]},{status:400,headers:{"Content-Type":"application/fhir+json"}});let n=await Object(function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}()).readResource(o,s);if(!n.success)return a.NextResponse.json(n.issues||{error:n.error},{status:404,headers:{"Content-Type":"application/fhir+json"}});let i=e.headers.get("content-type");if(i?.includes("application/json-patch+json"))return await e.json(),a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"not-supported",diagnostics:"JSON Patch not yet implemented"}]},{status:501,headers:{"Content-Type":"application/fhir+json"}});return a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"not-supported",diagnostics:"FHIR Patch not yet implemented"}]},{status:501,headers:{"Content-Type":"application/fhir+json"}})}catch(e){return console.error("FHIR PATCH error:",e),a.NextResponse.json({resourceType:"OperationOutcome",issue:[{severity:"error",code:"exception",diagnostics:e instanceof Error?e.message:"Internal server error"}]},{status:500,headers:{"Content-Type":"application/fhir+json"}})}}!function(){var e=Error("Cannot find module '@/lib/fhir/fhir.service'");throw e.code="MODULE_NOT_FOUND",e}();let h=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/fhir/r4/[...resource]/route",pathname:"/api/fhir/r4/[...resource]",filename:"route",bundlePath:"app/api/fhir/r4/[...resource]/route"},resolvedPagePath:"/workspace/Hospital-Management-System/src/app/api/fhir/r4/[...resource]/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:O,serverHooks:y}=h;function j(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:O})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[7395,6088],()=>t(97315));module.exports=o})();