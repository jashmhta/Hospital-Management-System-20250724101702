(()=>{var e={};e.id=346,e.ids=[346],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15491:(e,r,t)=>{"use strict";let o,s;t.d(r,{Ak:()=>i});var n=t(77598);function a(e){!o||o.length<e?(o=Buffer.allocUnsafe(128*e),n.webcrypto.getRandomValues(o),s=0):s+e>o.length&&(n.webcrypto.getRandomValues(o),s=0),s+=e}function i(e=21){a(e|=0);let r="";for(let t=s-e;t<s;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&o[t]];return r}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33159:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73327:()=>{},77598:e=>{"use strict";e.exports=require("node:crypto")},79249:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>c,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>y});var o={};t.r(o),t.d(o,{GET:()=>u,POST:()=>p});var s=t(2179),n=t(20540),a=t(57395),i=t(8306),d=t(15491);async function u(e){let r=await Object(function(){var e=Error("Cannot find module '@/lib/session'");throw e.code="MODULE_NOT_FOUND",e}())();if(!r?.user||!await Object(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,["Admin","Doctor","Receptionist","Technician","Radiologist"]))return i.NextResponse.json({error:"Unauthorized"},{status:403});let t=process.env.DB;try{let{results:e}=await t.prepare("SELECT * FROM RadiologyProcedureTypes ORDER BY name ASC").all();return i.NextResponse.json(e)}catch(r){let e=r instanceof Error?r.message:String(r);return console.error({message:"Error fetching radiology procedure types",error:e}),i.NextResponse.json({error:"Failed to fetch radiology procedure types",details:e},{status:500})}}async function p(e){let r=await Object(function(){var e=Error("Cannot find module '@/lib/session'");throw e.code="MODULE_NOT_FOUND",e}())();if(!r?.user||!await Object(function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(e,["Admin"]))return i.NextResponse.json({error:"Unauthorized"},{status:403});let t=process.env.DB;try{let{name:r,description:o,modality_type:s}=await e.json();if(!r)return i.NextResponse.json({error:"Missing required field: name"},{status:400});if(await t.prepare("SELECT id FROM RadiologyProcedureTypes WHERE name = ?").bind(r).first())return i.NextResponse.json({error:"Procedure type with this name already exists"},{status:409});let n=(0,d.Ak)(),a=new Date().toISOString();return await t.prepare("INSERT INTO RadiologyProcedureTypes (id, name, description, modality_type, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)").bind(n,r,o||void 0,s||void 0,a,a).run(),i.NextResponse.json({id:n,status:"Radiology procedure type created"},{status:201})}catch(r){let e=r instanceof Error?r.message:String(r);if(console.error({message:"Error creating radiology procedure type",error:e}),e?.includes("UNIQUE constraint failed"))return i.NextResponse.json({error:"Procedure type with this name already exists"},{status:409});return i.NextResponse.json({error:"Failed to create radiology procedure type",details:e},{status:500})}}!function(){var e=Error("Cannot find module '@/lib/session'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}();let c=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/radiology/procedure-types/route",pathname:"/api/radiology/procedure-types",filename:"route",bundlePath:"app/api/radiology/procedure-types/route"},resolvedPagePath:"/workspace/Hospital-Management-System/src/app/api/radiology/procedure-types/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:y,serverHooks:f}=c;function g(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:y})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[7395,6088],()=>t(79249));module.exports=o})();