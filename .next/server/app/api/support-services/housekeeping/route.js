(()=>{var e={};e.id=6874,e.ids=[6874],e.modules={2543:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>T,routeModule:()=>U,serverHooks:()=>h,workAsyncStorage:()=>_,workUnitAsyncStorage:()=>f});var n={};t.r(n),t.d(n,{ASSIGN:()=>N,COMPLETE:()=>D,DELETE:()=>g,GET:()=>E,GET_ANALYTICS:()=>w,GET_BY_ID:()=>O,PATCH:()=>m,POST:()=>l});var i=t(2179),o=t(20540),s=t(57395),a=t(8306),u=t(72482);!function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/security.service'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module '@/lib/services/support-services/housekeeping/housekeeping.service'");throw e.code="MODULE_NOT_FOUND",e}();let d=Object(function(){var e=Error("Cannot find module '@/lib/services/support-services/housekeeping/housekeeping.service'");throw e.code="MODULE_NOT_FOUND",e}())(),c=u.z.object({locationId:u.z.string().uuid(),requestType:u.z.enum(["CLEANING","DISINFECTION","LINEN_CHANGE","WASTE_DISPOSAL","OTHER"]),priority:u.z.enum(["LOW","MEDIUM","HIGH","URGENT"]),description:u.z.string().min(5).max(500),scheduledTime:u.z.string().transform(e=>new Date(e)),notes:u.z.string().max(1e3).optional(),requestedById:u.z.string().uuid()}),p=u.z.object({requestType:u.z.enum(["CLEANING","DISINFECTION","LINEN_CHANGE","WASTE_DISPOSAL","OTHER"]).optional(),priority:u.z.enum(["LOW","MEDIUM","HIGH","URGENT"]).optional(),description:u.z.string().min(5).max(500).optional(),scheduledTime:u.z.string().transform(e=>new Date(e)).optional(),notes:u.z.string().max(1e3).optional(),status:u.z.enum(["PENDING","ASSIGNED","IN_PROGRESS","COMPLETED","CANCELLED"]).optional(),assignedToId:u.z.string().uuid().optional()});async function E(e){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let r=e.nextUrl.searchParams,t={status:r.get("status")||void 0,priority:r.get("priority")||void 0,locationId:r.get("locationId")||void 0,requestType:r.get("requestType")||void 0,fromDate:r.get("fromDate")?new Date(r.get("fromDate")):void 0,toDate:r.get("toDate")?new Date(r.get("toDate")):void 0,page:parseInt(r.get("page")||"1"),limit:parseInt(r.get("limit")||"10")},n=await d.getHousekeepingRequests(t);return a.NextResponse.json(n)},{requiredPermission:"housekeeping:read",auditAction:"HOUSEKEEPING_REQUESTS_VIEW"})}async function l(e){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let r=await e.json(),t=c.parse(r),n=Object(function(){var e=Error("Cannot find module '@/lib/security.service'");throw e.code="MODULE_NOT_FOUND",e}()).sanitizeObject(t),i=await d.createHousekeepingRequest(n);return a.NextResponse.json(i,{status:201})},{requiredPermission:"housekeeping:create",auditAction:"HOUSEKEEPING_REQUEST_CREATE"})}async function O(e,{params:r}){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let t="true"===e.nextUrl.searchParams.get("fhir"),n=await d.getHousekeepingRequestById(r.id,t);return a.NextResponse.json(n)},{requiredPermission:"housekeeping:read",auditAction:"HOUSEKEEPING_REQUEST_VIEW"})}async function m(e,{params:r}){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let t=await e.json(),n=p.parse(t),i=Object(function(){var e=Error("Cannot find module '@/lib/security.service'");throw e.code="MODULE_NOT_FOUND",e}()).sanitizeObject(n),o=await d.updateHousekeepingRequest(r.id,i);return a.NextResponse.json(o)},{requiredPermission:"housekeeping:update",auditAction:"HOUSEKEEPING_REQUEST_UPDATE"})}async function g(e,{params:r}){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>(await d.deleteHousekeepingRequest(r.id),a.NextResponse.json({success:!0})),{requiredPermission:"housekeeping:delete",auditAction:"HOUSEKEEPING_REQUEST_DELETE"})}async function N(e,{params:r}){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let{staffId:t}=await e.json();if(!t)return a.NextResponse.json({error:"Staff ID is required"},{status:400});let n=await d.assignHousekeepingRequest(r.id,t);return a.NextResponse.json(n)},{requiredPermission:"housekeeping:assign",auditAction:"HOUSEKEEPING_REQUEST_ASSIGN"})}async function D(e,{params:r}){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let{notes:t,completedById:n}=await e.json(),i=await d.completeHousekeepingRequest(r.id,n,Object(function(){var e=Error("Cannot find module '@/lib/security.service'");throw e.code="MODULE_NOT_FOUND",e}()).sanitizeInput(t||""));return a.NextResponse.json(i)},{requiredPermission:"housekeeping:update",auditAction:"HOUSEKEEPING_REQUEST_COMPLETE"})}async function w(e){return Object(function(){var e=Error("Cannot find module '@/lib/middleware/error-handling.middleware'");throw e.code="MODULE_NOT_FOUND",e}())(e,async e=>{let r=e.nextUrl.searchParams,t=r.get("fromDate")?new Date(r.get("fromDate")):void 0,n=r.get("toDate")?new Date(r.get("toDate")):void 0,i=await d.getHousekeepingAnalytics(t,n);return a.NextResponse.json(i)},{requiredPermission:"housekeeping:analytics",auditAction:"HOUSEKEEPING_ANALYTICS_VIEW"})}let U=new i.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/support-services/housekeeping/route",pathname:"/api/support-services/housekeeping",filename:"route",bundlePath:"app/api/support-services/housekeeping/route"},resolvedPagePath:"/workspace/Hospital-Management-System/src/app/api/support-services/housekeeping/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:_,workUnitAsyncStorage:f,serverHooks:h}=U;function T(){return(0,s.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:f})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33159:()=>{},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73327:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[7395,6088,2482],()=>t(2543));module.exports=n})();