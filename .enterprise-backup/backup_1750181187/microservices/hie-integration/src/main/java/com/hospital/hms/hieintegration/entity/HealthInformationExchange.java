package com.hospital.hms.hieintegration.entity;

import jakarta.persistence.*;
import jakarta.validation.constraints.*;
import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.annotation.LastModifiedDate;
import org.springframework.data.jpa.domain.support.AuditingEntityListener;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.UUID;

/**
 * Health Information Exchange Entity
 * 
 * Represents external health networks and HIE organizations
 * that participate in health information sharing.
 * 
 * @author HMS Enterprise Team
 * @version 1.0.0
 */
@Entity
@Table(name = "health_information_exchanges", indexes = {
    @Index(name = "idx_hie_code", columnList = "hie_code", unique = true),
    @Index(name = "idx_hie_name", columnList = "hie_name"),
    @Index(name = "idx_hie_status", columnList = "status"),
    @Index(name = "idx_hie_type", columnList = "hie_type"),
    @Index(name = "idx_hie_region", columnList = "geographic_region")
})\n@EntityListeners(AuditingEntityListener.class)\npublic class HealthInformationExchange {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"id\", updatable = false, nullable = false)\n    private UUID id;\n\n    @Column(name = \"hie_code\", unique = true, nullable = false, length = 50)\n    @NotBlank(message = \"HIE code is required\")\n    @Size(max = 50, message = \"HIE code must not exceed 50 characters\")\n    private String hieCode;\n\n    @Column(name = \"hie_name\", nullable = false, length = 200)\n    @NotBlank(message = \"HIE name is required\")\n    @Size(max = 200, message = \"HIE name must not exceed 200 characters\")\n    private String hieName;\n\n    @Column(name = \"description\", columnDefinition = \"TEXT\")\n    private String description;\n\n    @Column(name = \"hie_type\", nullable = false, length = 30)\n    @Enumerated(EnumType.STRING)\n    @NotNull(message = \"HIE type is required\")\n    private HieType hieType;\n\n    @Column(name = \"status\", nullable = false, length = 20)\n    @Enumerated(EnumType.STRING)\n    @NotNull(message = \"Status is required\")\n    private HieStatus status = HieStatus.ACTIVE;\n\n    // Contact Information\n    @Column(name = \"primary_contact_name\", length = 100)\n    @Size(max = 100, message = \"Primary contact name must not exceed 100 characters\")\n    private String primaryContactName;\n\n    @Column(name = \"primary_contact_email\", length = 100)\n    @Email(message = \"Invalid email format\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    private String primaryContactEmail;\n\n    @Column(name = \"primary_contact_phone\", length = 20)\n    @Pattern(regexp = \"^[\\\\+]?[1-9][\\\\d\\\\s\\\\-\\\\(\\\\)]{7,15}$\", message = \"Invalid phone format\")\n    private String primaryContactPhone;\n\n    @Column(name = \"technical_contact_name\", length = 100)\n    @Size(max = 100, message = \"Technical contact name must not exceed 100 characters\")\n    private String technicalContactName;\n\n    @Column(name = \"technical_contact_email\", length = 100)\n    @Email(message = \"Invalid email format\")\n    @Size(max = 100, message = \"Email must not exceed 100 characters\")\n    private String technicalContactEmail;\n\n    @Column(name = \"technical_contact_phone\", length = 20)\n    @Pattern(regexp = \"^[\\\\+]?[1-9][\\\\d\\\\s\\\\-\\\\(\\\\)]{7,15}$\", message = \"Invalid phone format\")\n    private String technicalContactPhone;\n\n    // Geographic Information\n    @Column(name = \"geographic_region\", length = 100)\n    @Size(max = 100, message = \"Geographic region must not exceed 100 characters\")\n    private String geographicRegion;\n\n    @Column(name = \"service_area\", columnDefinition = \"TEXT\")\n    private String serviceArea;\n\n    @Column(name = \"time_zone\", length = 50)\n    @Size(max = 50, message = \"Time zone must not exceed 50 characters\")\n    private String timeZone;\n\n    // Technical Configuration\n    @Column(name = \"base_url\", length = 500)\n    @Size(max = 500, message = \"Base URL must not exceed 500 characters\")\n    private String baseUrl;\n\n    @Column(name = \"fhir_endpoint\", length = 500)\n    @Size(max = 500, message = \"FHIR endpoint must not exceed 500 characters\")\n    private String fhirEndpoint;\n\n    @Column(name = \"hl7_endpoint\", length = 500)\n    @Size(max = 500, message = \"HL7 endpoint must not exceed 500 characters\")\n    private String hl7Endpoint;\n\n    @Column(name = \"soap_endpoint\", length = 500)\n    @Size(max = 500, message = \"SOAP endpoint must not exceed 500 characters\")\n    private String soapEndpoint;\n\n    @Column(name = \"rest_endpoint\", length = 500)\n    @Size(max = 500, message = \"REST endpoint must not exceed 500 characters\")\n    private String restEndpoint;\n\n    // Security Configuration\n    @Column(name = \"authentication_type\", length = 30)\n    @Enumerated(EnumType.STRING)\n    private AuthenticationType authenticationType;\n\n    @Column(name = \"client_id\", length = 100)\n    @Size(max = 100, message = \"Client ID must not exceed 100 characters\")\n    private String clientId;\n\n    @Column(name = \"client_secret\", length = 500)\n    @Size(max = 500, message = \"Client secret must not exceed 500 characters\")\n    private String clientSecret;\n\n    @Column(name = \"oauth_token_url\", length = 500)\n    @Size(max = 500, message = \"OAuth token URL must not exceed 500 characters\")\n    private String oauthTokenUrl;\n\n    @Column(name = \"certificate_thumbprint\", length = 100)\n    @Size(max = 100, message = \"Certificate thumbprint must not exceed 100 characters\")\n    private String certificateThumbprint;\n\n    // Supported Standards\n    @Column(name = \"supported_fhir_versions\", length = 100)\n    @Size(max = 100, message = \"Supported FHIR versions must not exceed 100 characters\")\n    private String supportedFhirVersions;\n\n    @Column(name = \"supported_hl7_versions\", length = 100)\n    @Size(max = 100, message = \"Supported HL7 versions must not exceed 100 characters\")\n    private String supportedHl7Versions;\n\n    @Column(name = \"supported_profiles\", columnDefinition = \"TEXT\")\n    private String supportedProfiles;\n\n    // Data Exchange Configuration\n    @Column(name = \"data_sharing_agreement_id\", length = 100)\n    @Size(max = 100, message = \"Data sharing agreement ID must not exceed 100 characters\")\n    private String dataSharingAgreementId;\n\n    @Column(name = \"data_sharing_start_date\")\n    private LocalDateTime dataSharingStartDate;\n\n    @Column(name = \"data_sharing_end_date\")\n    private LocalDateTime dataSharingEndDate;\n\n    @Column(name = \"max_records_per_request\")\n    @Min(value = 1, message = \"Max records per request must be at least 1\")\n    @Max(value = 10000, message = \"Max records per request must not exceed 10000\")\n    private Integer maxRecordsPerRequest = 100;\n\n    @Column(name = \"request_timeout_seconds\")\n    @Min(value = 1, message = \"Request timeout must be at least 1 second\")\n    @Max(value = 300, message = \"Request timeout must not exceed 300 seconds\")\n    private Integer requestTimeoutSeconds = 30;\n\n    // Quality and Performance Metrics\n    @Column(name = \"uptime_percentage\", precision = 5, scale = 2)\n    @DecimalMin(value = \"0.0\", message = \"Uptime percentage must be non-negative\")\n    @DecimalMax(value = \"100.0\", message = \"Uptime percentage must not exceed 100\")\n    private Double uptimePercentage;\n\n    @Column(name = \"average_response_time_ms\")\n    @Min(value = 0, message = \"Average response time must be non-negative\")\n    private Long averageResponseTimeMs;\n\n    @Column(name = \"success_rate_percentage\", precision = 5, scale = 2)\n    @DecimalMin(value = \"0.0\", message = \"Success rate must be non-negative\")\n    @DecimalMax(value = \"100.0\", message = \"Success rate must not exceed 100\")\n    private Double successRatePercentage;\n\n    @Column(name = \"last_successful_connection\")\n    private LocalDateTime lastSuccessfulConnection;\n\n    @Column(name = \"last_failed_connection\")\n    private LocalDateTime lastFailedConnection;\n\n    @Column(name = \"connection_test_frequency_minutes\")\n    @Min(value = 1, message = \"Connection test frequency must be at least 1 minute\")\n    private Integer connectionTestFrequencyMinutes = 15;\n\n    // Relationships\n    @OneToMany(mappedBy = \"hie\", cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    private List<HieDataExchange> dataExchanges = new ArrayList<>();\n\n    @OneToMany(mappedBy = \"hie\", cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n    private List<HieConnection> connections = new ArrayList<>();\n\n    // Audit Fields\n    @CreatedDate\n    @Column(name = \"created_date\", nullable = false, updatable = false)\n    private LocalDateTime createdDate;\n\n    @LastModifiedDate\n    @Column(name = \"last_modified_date\")\n    private LocalDateTime lastModifiedDate;\n\n    @Column(name = \"created_by\", length = 100)\n    @Size(max = 100, message = \"Created by must not exceed 100 characters\")\n    private String createdBy;\n\n    @Column(name = \"last_modified_by\", length = 100)\n    @Size(max = 100, message = \"Last modified by must not exceed 100 characters\")\n    private String lastModifiedBy;\n\n    // Constructors\n    public HealthInformationExchange() {}\n\n    // Getters and Setters\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getHieCode() {\n        return hieCode;\n    }\n\n    public void setHieCode(String hieCode) {\n        this.hieCode = hieCode;\n    }\n\n    public String getHieName() {\n        return hieName;\n    }\n\n    public void setHieName(String hieName) {\n        this.hieName = hieName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public HieType getHieType() {\n        return hieType;\n    }\n\n    public void setHieType(HieType hieType) {\n        this.hieType = hieType;\n    }\n\n    public HieStatus getStatus() {\n        return status;\n    }\n\n    public void setStatus(HieStatus status) {\n        this.status = status;\n    }\n\n    public String getPrimaryContactName() {\n        return primaryContactName;\n    }\n\n    public void setPrimaryContactName(String primaryContactName) {\n        this.primaryContactName = primaryContactName;\n    }\n\n    public String getPrimaryContactEmail() {\n        return primaryContactEmail;\n    }\n\n    public void setPrimaryContactEmail(String primaryContactEmail) {\n        this.primaryContactEmail = primaryContactEmail;\n    }\n\n    public String getPrimaryContactPhone() {\n        return primaryContactPhone;\n    }\n\n    public void setPrimaryContactPhone(String primaryContactPhone) {\n        this.primaryContactPhone = primaryContactPhone;\n    }\n\n    public String getTechnicalContactName() {\n        return technicalContactName;\n    }\n\n    public void setTechnicalContactName(String technicalContactName) {\n        this.technicalContactName = technicalContactName;\n    }\n\n    public String getTechnicalContactEmail() {\n        return technicalContactEmail;\n    }\n\n    public void setTechnicalContactEmail(String technicalContactEmail) {\n        this.technicalContactEmail = technicalContactEmail;\n    }\n\n    public String getTechnicalContactPhone() {\n        return technicalContactPhone;\n    }\n\n    public void setTechnicalContactPhone(String technicalContactPhone) {\n        this.technicalContactPhone = technicalContactPhone;\n    }\n\n    public String getGeographicRegion() {\n        return geographicRegion;\n    }\n\n    public void setGeographicRegion(String geographicRegion) {\n        this.geographicRegion = geographicRegion;\n    }\n\n    public String getServiceArea() {\n        return serviceArea;\n    }\n\n    public void setServiceArea(String serviceArea) {\n        this.serviceArea = serviceArea;\n    }\n\n    public String getTimeZone() {\n        return timeZone;\n    }\n\n    public void setTimeZone(String timeZone) {\n        this.timeZone = timeZone;\n    }\n\n    public String getBaseUrl() {\n        return baseUrl;\n    }\n\n    public void setBaseUrl(String baseUrl) {\n        this.baseUrl = baseUrl;\n    }\n\n    public String getFhirEndpoint() {\n        return fhirEndpoint;\n    }\n\n    public void setFhirEndpoint(String fhirEndpoint) {\n        this.fhirEndpoint = fhirEndpoint;\n    }\n\n    public String getHl7Endpoint() {\n        return hl7Endpoint;\n    }\n\n    public void setHl7Endpoint(String hl7Endpoint) {\n        this.hl7Endpoint = hl7Endpoint;\n    }\n\n    public String getSoapEndpoint() {\n        return soapEndpoint;\n    }\n\n    public void setSoapEndpoint(String soapEndpoint) {\n        this.soapEndpoint = soapEndpoint;\n    }\n\n    public String getRestEndpoint() {\n        return restEndpoint;\n    }\n\n    public void setRestEndpoint(String restEndpoint) {\n        this.restEndpoint = restEndpoint;\n    }\n\n    public AuthenticationType getAuthenticationType() {\n        return authenticationType;\n    }\n\n    public void setAuthenticationType(AuthenticationType authenticationType) {\n        this.authenticationType = authenticationType;\n    }\n\n    public String getClientId() {\n        return clientId;\n    }\n\n    public void setClientId(String clientId) {\n        this.clientId = clientId;\n    }\n\n    public String getClientSecret() {\n        return clientSecret;\n    }\n\n    public void setClientSecret(String clientSecret) {\n        this.clientSecret = clientSecret;\n    }\n\n    public String getOauthTokenUrl() {\n        return oauthTokenUrl;\n    }\n\n    public void setOauthTokenUrl(String oauthTokenUrl) {\n        this.oauthTokenUrl = oauthTokenUrl;\n    }\n\n    public String getCertificateThumbprint() {\n        return certificateThumbprint;\n    }\n\n    public void setCertificateThumbprint(String certificateThumbprint) {\n        this.certificateThumbprint = certificateThumbprint;\n    }\n\n    public String getSupportedFhirVersions() {\n        return supportedFhirVersions;\n    }\n\n    public void setSupportedFhirVersions(String supportedFhirVersions) {\n        this.supportedFhirVersions = supportedFhirVersions;\n    }\n\n    public String getSupportedHl7Versions() {\n        return supportedHl7Versions;\n    }\n\n    public void setSupportedHl7Versions(String supportedHl7Versions) {\n        this.supportedHl7Versions = supportedHl7Versions;\n    }\n\n    public String getSupportedProfiles() {\n        return supportedProfiles;\n    }\n\n    public void setSupportedProfiles(String supportedProfiles) {\n        this.supportedProfiles = supportedProfiles;\n    }\n\n    public String getDataSharingAgreementId() {\n        return dataSharingAgreementId;\n    }\n\n    public void setDataSharingAgreementId(String dataSharingAgreementId) {\n        this.dataSharingAgreementId = dataSharingAgreementId;\n    }\n\n    public LocalDateTime getDataSharingStartDate() {\n        return dataSharingStartDate;\n    }\n\n    public void setDataSharingStartDate(LocalDateTime dataSharingStartDate) {\n        this.dataSharingStartDate = dataSharingStartDate;\n    }\n\n    public LocalDateTime getDataSharingEndDate() {\n        return dataSharingEndDate;\n    }\n\n    public void setDataSharingEndDate(LocalDateTime dataSharingEndDate) {\n        this.dataSharingEndDate = dataSharingEndDate;\n    }\n\n    public Integer getMaxRecordsPerRequest() {\n        return maxRecordsPerRequest;\n    }\n\n    public void setMaxRecordsPerRequest(Integer maxRecordsPerRequest) {\n        this.maxRecordsPerRequest = maxRecordsPerRequest;\n    }\n\n    public Integer getRequestTimeoutSeconds() {\n        return requestTimeoutSeconds;\n    }\n\n    public void setRequestTimeoutSeconds(Integer requestTimeoutSeconds) {\n        this.requestTimeoutSeconds = requestTimeoutSeconds;\n    }\n\n    public Double getUptimePercentage() {\n        return uptimePercentage;\n    }\n\n    public void setUptimePercentage(Double uptimePercentage) {\n        this.uptimePercentage = uptimePercentage;\n    }\n\n    public Long getAverageResponseTimeMs() {\n        return averageResponseTimeMs;\n    }\n\n    public void setAverageResponseTimeMs(Long averageResponseTimeMs) {\n        this.averageResponseTimeMs = averageResponseTimeMs;\n    }\n\n    public Double getSuccessRatePercentage() {\n        return successRatePercentage;\n    }\n\n    public void setSuccessRatePercentage(Double successRatePercentage) {\n        this.successRatePercentage = successRatePercentage;\n    }\n\n    public LocalDateTime getLastSuccessfulConnection() {\n        return lastSuccessfulConnection;\n    }\n\n    public void setLastSuccessfulConnection(LocalDateTime lastSuccessfulConnection) {\n        this.lastSuccessfulConnection = lastSuccessfulConnection;\n    }\n\n    public LocalDateTime getLastFailedConnection() {\n        return lastFailedConnection;\n    }\n\n    public void setLastFailedConnection(LocalDateTime lastFailedConnection) {\n        this.lastFailedConnection = lastFailedConnection;\n    }\n\n    public Integer getConnectionTestFrequencyMinutes() {\n        return connectionTestFrequencyMinutes;\n    }\n\n    public void setConnectionTestFrequencyMinutes(Integer connectionTestFrequencyMinutes) {\n        this.connectionTestFrequencyMinutes = connectionTestFrequencyMinutes;\n    }\n\n    public List<HieDataExchange> getDataExchanges() {\n        return dataExchanges;\n    }\n\n    public void setDataExchanges(List<HieDataExchange> dataExchanges) {\n        this.dataExchanges = dataExchanges;\n    }\n\n    public List<HieConnection> getConnections() {\n        return connections;\n    }\n\n    public void setConnections(List<HieConnection> connections) {\n        this.connections = connections;\n    }\n\n    public LocalDateTime getCreatedDate() {\n        return createdDate;\n    }\n\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = createdDate;\n    }\n\n    public LocalDateTime getLastModifiedDate() {\n        return lastModifiedDate;\n    }\n\n    public void setLastModifiedDate(LocalDateTime lastModifiedDate) {\n        this.lastModifiedDate = lastModifiedDate;\n    }\n\n    public String getCreatedBy() {\n        return createdBy;\n    }\n\n    public void setCreatedBy(String createdBy) {\n        this.createdBy = createdBy;\n    }\n\n    public String getLastModifiedBy() {\n        return lastModifiedBy;\n    }\n\n    public void setLastModifiedBy(String lastModifiedBy) {\n        this.lastModifiedBy = lastModifiedBy;\n    }\n}
